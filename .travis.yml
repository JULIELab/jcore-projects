language: java
env:
  global:
  - secure: uThYojI35udvp9pTp96hoG7WKQkaOxJyKD9fvdGXv357fCNzNtl6qhhAF8I/aDg1dWFP9iLlq/pAABbtYWzsrqQJrXzYncHjn9F+d+nuTtwc93CeuagSovvAo+GXnZpTvBnKi1bzNGBxZG2CBx5xkihDEpdEETlnWXzi9Q0jeXw1KxuEd+zwcfucl24w3GSxlPIuj+AuSJdXbVsp2J/R8x18AeWwShiMxMa1TinAEu4N3rOZQVygnPQ2aHsNTNvVhvfn7dJoWrKQ0jN2pGcpq4LTEKVDEiDeNO/kUxI0avviE0agMJRi/f779DLkrCURTK7HXcoQQQ6qzSAMj8ztNQPr+jJIQpHOaZApPUpMfbXnqD6hu/3qnHMu0paS0zjdksE7EbLMNUN8JOjuAtuOJeakbz7aeSd2R6QypII78UUUQEj73BZDtHctMl7mDwtSkhiUpdOG1V9Oy1TKpDHhr/B3SNmf+WHQDnve4cec8Ik1iKMQnbbw3Cbj3afFf2A7jYIkYJg3R2FQunRNwpHO9uNJ6i+IYrGI3Yd0I48hfmRl5Ixa2SPaWR+XsVpDPClX/hq92o8U32LS2cUuPl2nGNpULTqJw3RkOHWlcUymLhqTcyT7/z1vlcV52ZfOxN9X22ZjyJZVBmAK5FHc/XPLTdEZflRPmYj6g2KvRdEhrAQ=
  - # SONATYPE_USERNAME
  - secure: oJxY+Ptv0UJh1RmdIREBVOoTUc4TMyEFgvQapVG+wD1hcFrjoHj76Q3OGh5YpimBx5LlOAsj1jSShAyfUPtEl11sjyNjLRQpJm8lZgd9DIJ6FXaKPCAnKRKU3Ayctip4BvepLEiYc6xzHXwz0icnU48TfmfHeNV9zXwaFGIG77JvNv8kbPxcNgNZLVwBYKX1cgzgCTXV6V39rawq19fcZQJ1zK0+MbDQlaDYs6Hbu/H9gVPNJvqVLvZ2+7zmWvHbSn1j+Ez0/ZmCpqZpkypYolto5POxH5FMnShk2sKf71L/60CKqt53JgurChBYRqJL0v/4DVkavzJ0+I7bOW2BY4shAxj5poD7loiTQb5Jfh/eqNc+m48tO2GtZJhgUFEbTYr7svU0qsK2Y7O70aTYkSsjw0TVvL41xVaBBGpXe6vI6Y5cp66Mnvf9MXkSg/Y0/TmLKRW0ueP3ZQKTapdBTuCWg11yDkyrTEVzMANbNmrmi6Orkx6nXgswNKbLTdhAbQm0B2gRZAswTuVeaNVFH3E6h+EOcdaGst7WhhQs1epL9WAwSIvZs4nxGR7oERoM9RoUXVscx4+10XmhaudDVkaLK+lsvL63ujyQUXiEx15VihKdrZfN/D6Zkky9JwEDrtNgcDLeWps+Qaz1luoOmuWc/nQ79VOaPEarFvL3vsE=
  - # SONATYPE_PASSWORD
  - secure: VQpaHJdJgmTVg9lZu+7UDxMux9CtOR0rFw+HQZDRidcG9TSGlhETuiNvXFlMVQNKr0rIvscsrF7zPGiqdIczCzN2T685Em0qb/TJw0lGUGp78LJpxz4T+exZSY7vtA2tWsbALAAccU2A0SpbfILhJE5e/Ur1xmt7I4fitxxPZqmODlpoxib/JgpIEcuolTQ6Ep+KL381t3DaY4sDdQH1JKnF0sUkItUvBf1IxZ0q3TYj86JS52zmhjpV1OUMhCAq6VXM0euUQ1lVkTYDe7yW++58Gdwsk+G0duRkcvwcK0kBI1dWKBHcEB8WOfT8XO0ozHXpGRmcYbwbI+45me8trHrUjPIet4yq500Jx9LqnAklU7qlSbUTbjKXYYsRcz53yV2Oj5Vs/gTolWdPndkQXed87RibistHRJ4U1609zqnkkJ2h7Hk1jTJ6AxHh4lIzRKVYGfnq3+DA7PBC7kfC0CtDbKqZJIEuuI4ZkofOBNM6U6SwsfvZxY97OdhBkZ4ekJaIAatMxuEnPWvJSK9uB6cWs+vnB8eCE6QMrtRQe4+UWJuRyclnaY5bImQkzNY+NXZhs26kcIcaMnMZqxIWbbjEvslcQ3g6XSPbXitEGhxJBkjK+TRqV4QlANE7IR4W1dyskV/zxHY0y62LKjCAEb2UeKH5FJ77BWbOxXJs2y8=
  - # GPG_KEY_NAME
  - secure: GYwpNZxHCSA8E7i5u9bwdr1krUC0suapj0r5doPzZob6K4wNcoHHkaRP6OPpJ7aPUHPaPdI9lbpNbKG3sLeNU39AOHTJRlPGjG3FFirVYLvwRDgl00e7uZk4BXfDotqDeXW6pOZA2ZPtuvxY/JLBYGseXuyDwyTh5rJLKJcaP/Ynh9cb7a6QDkY8MShCAUWr8/8NoyluhunimPXn9TwlSOPnNpXexKXd65NK25ftagxSPFGxKhc7O1D5VRz21DbKkIy0SmXEXTghY3nkgMG4XAulqLo8kTyQcvzq4Aw8zMsBw1gKuJkj+FnBHBxaUweR5wWV8pDa8iHff0YPOp4qKAYu/BHppdPsvBoUYGi5U3oLbBDl3w25/aX41J45nnoNyFugTT2rAt8+ChnomWr0fkniI69GcUfCJ7aJRD2XQIYwYFPrNqO+jpHrda1xiPIlvfVYi8V2+rBiGNGjSB0IvQWTT/dTjatqedxsZmxvD+n2/MJJLbmb2Fjlfk8hPImGR/39gpYKqPNZ3qmN3Z3lZ1Z5h3xc0uf4Tu9d+S8GKSNT0XZJiJC/u+wpOHMokLqnWgbdIj2IbP7ehH4shFEopRhI/j0hfrD7EedTpbX4FrzlMFG7XiHH1y4VFc97Ah6RwMWplqzJcEVl34nSbqNPlShJ+uACciK+lg6aKwnv5+8=
  - # GPG_PASSPHRASE

install: mvn install -DskipTests=true -Dmaven.javadoc.skip=true -B -V
script: mvn test -B

cache:
  directories:
    - $HOME/.m2/repository

before_deploy: travis-deployment/before-deploy.sh
deploy:
  provider: script
  script: travis-deployment/deploy.sh
  # We need the built artifacts to create their checksums and check if they are already deployed
  skip_cleanup: true
  on:
    all_branches: true
    condition: $TRAVIS_BRANCH =~ ^2.3.0-SNAPSHOT|master$